"use strict";(self.webpackChunknpy_notebook=self.webpackChunknpy_notebook||[]).push([[4715],{8349:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>g,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var t=i(4848),s=i(8453);const o={},r="MARS: Mixture of Auto-Regressive Models for  Fine-grained Text-to-image Synthesis",a={id:"Deep-Learning/\u8bba\u6587\u7b14\u8bb0/MARS-Mixture-of-Auto-Regressive-Models-for-Fine-grained-Text-to-image-Synthesis",title:"MARS: Mixture of Auto-Regressive Models for  Fine-grained Text-to-image Synthesis",description:"\u539f\u6587\u94fe\u63a5\uff1ahttps://arxiv.org/abs/2407.07614",source:"@site/docs/Deep-Learning/6-\u8bba\u6587\u7b14\u8bb0/8-MARS-Mixture-of-Auto-Regressive-Models-for-Fine-grained-Text-to-image-Synthesis.md",sourceDirName:"Deep-Learning/6-\u8bba\u6587\u7b14\u8bb0",slug:"/Deep-Learning/\u8bba\u6587\u7b14\u8bb0/MARS-Mixture-of-Auto-Regressive-Models-for-Fine-grained-Text-to-image-Synthesis",permalink:"/en/docs/Deep-Learning/\u8bba\u6587\u7b14\u8bb0/MARS-Mixture-of-Auto-Regressive-Models-for-Fine-grained-Text-to-image-Synthesis",draft:!1,unlisted:!1,editUrl:"https://github.com/bonjour-npy/bonjour-npy.github.io/tree/master/docs/Deep-Learning/6-\u8bba\u6587\u7b14\u8bb0/8-MARS-Mixture-of-Auto-Regressive-Models-for-Fine-grained-Text-to-image-Synthesis.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{},sidebar:"deep_learning",previous:{title:"CVPR 2022: High-Resolution Image Synthesis with Latent Diffusion Models",permalink:"/en/docs/Deep-Learning/\u8bba\u6587\u7b14\u8bb0/Latent-Diffusion-Models"},next:{title:"Understanding Diffusion Models: A Unified Perspective",permalink:"/en/docs/Deep-Learning/\u8bba\u6587\u7b14\u8bb0/Understanding-Diffusion-Models-A-Unified-Perspective"}},l={},d=[{value:"\u6458\u8981",id:"\u6458\u8981",level:2},{value:"\u4e3b\u8981\u65b9\u6cd5\u4e0e\u6a21\u578b\u7ed3\u6784",id:"\u4e3b\u8981\u65b9\u6cd5\u4e0e\u6a21\u578b\u7ed3\u6784",level:2},{value:"\u603b\u4f53\u7ed3\u6784",id:"\u603b\u4f53\u7ed3\u6784",level:3},{value:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6",id:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6",level:3},{value:"\u5206\u8bcd\uff08Tokenization\uff09",id:"\u5206\u8bcdtokenization",level:4},{value:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6",id:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6-1",level:4}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"mars-mixture-of-auto-regressive-models-for--fine-grained-text-to-image-synthesis",children:"MARS: Mixture of Auto-Regressive Models for  Fine-grained Text-to-image Synthesis"})}),"\n",(0,t.jsxs)(n.admonition,{title:"\u76f8\u5173\u94fe\u63a5",type:"tip",children:[(0,t.jsxs)(n.p,{children:["\u539f\u6587\u94fe\u63a5\uff1a",(0,t.jsx)(n.a,{href:"https://arxiv.org/abs/2407.07614",children:"https://arxiv.org/abs/2407.07614"})]}),(0,t.jsxs)(n.p,{children:["\u53c2\u8003\u8d44\u6599\uff1a",(0,t.jsx)(n.a,{href:"https://blog.csdn.net/AIGCer/article/details/140369222",children:"\u81ea\u56de\u5f52\u6273\u56de\u4e00\u57ce\uff01\u963f\u91cc\u7b49\u63d0\u51faMARS\uff1a\u8d85\u8d8aPixArt-\u03b1\u3001SD-XL\u7b49\u7684\u6587\u672c\u5230\u56fe\u50cf\u751f\u6210\u6846\u67b6"})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u6458\u8981",children:"\u6458\u8981"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Auto-regressive models have made significant progress in the realm of language generation, yet do not perform on par with diffusion models in the domain of image synthesis. In this work, we introduce MARS, a novel framework for T2I generation that incorporates a specially designed Semantic Vision-Language Integration Expert (SemVIE). This innovative component integrates pre-trained LLMs by independently processing linguistic and visual information\u2014freezing the textual component while fine-tuning the visual component. This methodology preserves the NLP capabilities of LLMs while imbuing them with exceptional visual understanding. Building upon the powerful base of the pre-trained Qwen-7B, MARS stands out with its bilingual generative capabilities corresponding to both English and  Chinese language prompts and the capacity for joint image and text generation. The flexibility of this framework lends itself to migration towards any-to-any task adaptability. Furthermore, MARS employs a multi-stage training strategy that first establishes robust image-text alignment through complementary bidirectional tasks and subsequently concentrates on refining the T2I generation process, significantly augmenting text-image synchrony and the granularity of image details. Notably, MARS requires only 9% of the GPU days needed by SD1.5, yet it achieves remarkable results across a variety of benchmarks, illustrating the training efficiency and the potential for swift deployment in various applications. Code will be available at ",(0,t.jsx)(n.a,{href:"https://github.com/fusiming3/MARS",children:"https://github.com/fusiming3/MARS"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u81ea\u56de\u5f52\u6a21\u578b\u5728\u8bed\u8a00\u751f\u6210\u9886\u57df\u53d6\u5f97\u4e86\u663e\u8457\u8fdb\u5c55\uff0c\u4f46\u5728\u56fe\u50cf\u5408\u6210\u9886\u57df\u7684\u8868\u73b0\u5374\u4e0d\u5982\u6269\u6563\u6a21\u578b\u3002\u672c\u6587\u4ecb\u7ecd\u4e86 MARS \u65b9\u6cd5\uff0c\u4e00\u79cd\u7528\u4e8e\u6587\u672c\u5230\u56fe\u50cf\u751f\u6210\u7684\u65b0\u6846\u67b6\u3002"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u8be5\u6846\u67b6\u7ed3\u5408\u4e86\u4e13\u95e8\u8bbe\u8ba1\u7684",(0,t.jsx)(n.strong,{children:"\u8bed\u8a00-\u89c6\u89c9\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6\uff08Semantic Vision-Language Integration Expert\uff0cSemVIE\uff09"}),"\u3002\u901a\u8fc7\u72ec\u7acb\u5904\u7406\u8bed\u8a00\u548c\u89c6\u89c9\u4fe1\u606f\u6765\u6574\u5408\u9884\u8bad\u7ec3\u7684 LLM\uff0c\u51bb\u7ed3\u8bed\u8a00\u90e8\u5206\u7684\u540c\u65f6\u5fae\u8c03\u89c6\u89c9\u90e8\u5206\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u79cd\u65b9\u6cd5\u4fdd\u7559\u4e86 LLM \u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u80fd\u529b\uff0c\u540c\u65f6\u8d4b\u4e88\u5176\u5353\u8d8a\u7684\u89c6\u89c9\u7406\u89e3\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u57fa\u4e8e\u5f3a\u5927\u7684\u9884\u8bad\u7ec3\u6a21\u578b ",(0,t.jsx)(n.strong,{children:"Qwen-7B"}),"\uff0cMARS \u5728\u751f\u6210\u80fd\u529b\u4e0a\u8131\u9896\u800c\u51fa\uff0c\u80fd\u591f\u5904\u7406",(0,t.jsx)(n.strong,{children:"\u6c49\u82f1\u53cc\u8bed"}),"\u7684 T2I \u751f\u6210\u4efb\u52a1\uff0c\u5e76\u5177\u5907\u8054\u5408\u56fe\u50cf\u548c\u6587\u672c\u751f\u6210\u7684\u80fd\u529b\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u6b64\u5916\uff0cMARS \u91c7\u7528\u4e86\u591a\u9636\u6bb5\u8bad\u7ec3\u7b56\u7565\uff0c\u9996\u5148\u901a\u8fc7\u4e92\u8865\u7684\u53cc\u5411\u4efb\u52a1\u5efa\u7acb\u5f3a\u5927\u7684\u56fe\u6587\u5bf9\u9f50\uff0c\u7136\u540e\u4e13\u6ce8\u4e8e\u7cbe\u7ec6\u5316\u6587\u672c\u5230\u56fe\u50cf\u7684\u751f\u6210\u8fc7\u7a0b\uff0c\u663e\u8457\u63d0\u9ad8\u4e86\u6587\u672c\u548c\u56fe\u50cf\u7684\u540c\u6b65\u6027\u548c\u56fe\u50cf\u7ec6\u8282\u7684\u7ec6\u817b\u7a0b\u5ea6\u3002"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cMARS \u7684\u8bad\u7ec3\u4ec5\u9700 Stable Diffusion v1-5 \u8bad\u7ec3\u6240\u9700 GPU \u5929\u6570\u7684 9%\uff0c\u540c\u65f6\u5728\u5404\u79cd\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u53d6\u5f97\u4e86\u663e\u8457\u6210\u679c\uff0c\u5c55\u793a\u4e86\u8bad\u7ec3\u6548\u7387\u548c\u5728\u5404\u79cd\u5e94\u7528\u4e2d\u5feb\u901f\u90e8\u7f72\u7684\u6f5c\u529b\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e3b\u8981\u65b9\u6cd5\u4e0e\u6a21\u578b\u7ed3\u6784",children:"\u4e3b\u8981\u65b9\u6cd5\u4e0e\u6a21\u578b\u7ed3\u6784"}),"\n",(0,t.jsx)(n.h3,{id:"\u603b\u4f53\u7ed3\u6784",children:"\u603b\u4f53\u7ed3\u6784"}),"\n",(0,t.jsx)(n.p,{children:"MARS \u662f\u4e00\u4e2a\u5c06\u5927\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u4e0e\u89c6\u89c9\u751f\u6210\u80fd\u529b\u7ed3\u5408\u5728\u7edf\u4e00\u6846\u67b6\u5185\u7684\u521b\u65b0\u7cfb\u7edf\uff0c\u4f53\u73b0\u4e86\u4e00\u79cd\u5e73\u8861\u7684\u591a\u6a21\u6001\u67b6\u6784\uff0c\u5305\u542b\u4e86\u72ec\u7279\u4f46\u534f\u8c03\u4e00\u81f4\u7684\u89c6\u89c9\u548c\u8bed\u8a00\u4e13\u5bb6\u6a21\u578b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://raw.githubusercontent.com/bonjour-npy/Image-Hosting-Service/main/typora_imagesimage-20240823145526098.png",alt:"image-20240823145526098"})}),"\n",(0,t.jsx)(n.h3,{id:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6",children:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6"}),"\n",(0,t.jsx)(n.h4,{id:"\u5206\u8bcdtokenization",children:"\u5206\u8bcd\uff08Tokenization\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u672c\u7814\u7a76\u4e2d\uff0c\u9884\u8bad\u7ec3\u7684 LLM Qwen-7B \u4f5c\u4e3a\u57fa\u7840\u8bed\u8a00\u6846\u67b6\uff0c\u5229\u7528\u5176\u5206\u8bcd\u5668\u5c06\u6587\u672c\u6570\u636e\u62c6\u89e3\u4e3a\u4e00\u7cfb\u5217\u4ee3\u8868\u6027 tokens\u3002\u540c\u65f6\uff0c\u5728\u89c6\u89c9\u6a21\u6001\u4e2d\uff0c\u4f7f\u7528\u53d7 VQ-GAN \u67b6\u6784\u542f\u53d1\u7684\u7f16\u7801\u5668\u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a\u7279\u5f81\u56fe\uff0c\u5176\u4e2d\uff0c\u9884\u5b9a\u4e49\u4e3a\u91cf\u5316\u53c2\u6570 16\uff0cD \u8868\u793a\u7279\u5f81\u7ef4\u5ea6\u3002\u7279\u5f81\u56fe\u968f\u540e\u4f7f\u7528\u89c6\u89c9\u7801\u672c VQ-GAN \u8fdb\u884c\u91cf\u5316\uff0c\u5c06\u5176\u6620\u5c04\u4e3a\u4e00\u7cfb\u5217\u79bb\u6563\u7684\u4ee3\u7801\u7d22\u5f15 \u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6709\u6548\u5730\u5c06 256\xd7256 \u50cf\u7d20\u7684\u56fe\u50cf\u91cd\u6784\u4e3a\u4e00\u7cfb\u5217 256 \u4e2a token\uff0c\u5176\u4e2d\u6bcf\u4e2a token \u4ee3\u8868 16\xd716 \u50cf\u7d20\u7684\u56fe\u50cf\u6bb5\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u89c6\u89c9\u7801\u672c\u7531 8192 \u4e2a\u552f\u4e00\u7f16\u7801\u7ec4\u6210\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5728 MARS \u7684\u8bcd\u6c47\u8868\u4e2d\uff0c\u8fd9\u4e9b\u89c6\u89c9\u7ec4\u4ef6\u4e0e\u4f20\u7edf\u7684\u6587\u672c token \u4ea4\u7ec7\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u7efc\u5408\u7684\u591a\u6a21\u6001\u8bcd\u6c47\u8868\u3002\u8bed\u8a00 LLM \u7684\u539f\u59cb\u8bcd\u6c47\u8868\u5305\u542b 151,936 \u4e2a\u6761\u76ee\uff0c\u7ed3\u5408\u89c6\u89c9\u7801\u672c\u548c 6 \u4e2a\u4e13\u95e8\u8bbe\u8ba1\u7528\u4e8e\u8868\u793a\u56fe\u50cf\u5e8f\u5217\u5f00\u59cb\u548c\u7ed3\u675f\u7684\u7279\u6b8a token \u540e\uff0c\u5f62\u6210\u4e86\u4e00\u4e2a 160,136 \u5927\u5c0f\u7684\u591a\u6a21\u6001\u8bcd\u6c47\u8868\u3002\u5728 MARS \u7684\u67b6\u6784\u4e2d\uff0c\u7531 VQ-GAN \u8303\u5f0f\u5408\u6210\u7684\u89c6\u89c9 token \u4e0e\u6587\u672c token \u4eab\u6709\u540c\u7b49\u5730\u4f4d\u3002\u89c6\u89c9\u8bcd\u6c47\u7684\u521d\u59cb\u5d4c\u5165\u662f\u4ece\u9884\u8bad\u7ec3\u6587\u672c token \u7684\u805a\u5408\u5747\u503c\u5d4c\u5165\u4e2d\u5f97\u51fa\u7684\uff0c\u5efa\u7acb\u4e86\u8de8\u6a21\u6001\u96c6\u6210\u7684\u57fa\u7840\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6-1",children:"\u8bed\u4e49\u89c6\u89c9-\u8bed\u8a00\u96c6\u6210\u4e13\u5bb6"})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(6540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);